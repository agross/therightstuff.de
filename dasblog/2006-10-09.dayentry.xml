<?xml version="1.0" encoding="utf-8"?>
<DayEntry xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:newtelligence-com:dasblog:runtime:data">
  <Date>2006-10-09T02:00:00.0000000+02:00</Date>
  <Entries>
    <Entry>
      <Content>&lt;p&gt;&lt;img title="Dr. Watson" style="padding-left: 10px; float: right; padding-bottom: 10px" alt="Dr. Watson" src="http://www.it99.org/axl/content/binary/Dr.%20Watson.png" border="0"&gt;&lt;a href="http://www.hanselman.com/blog/"&gt;Scott Hanselman&lt;/a&gt; recently &lt;a href="http://www.hanselman.com/blog/SetUpYourSystemToUseMicrosoftsPublicSymbolServer.aspx"&gt;wrote&lt;/a&gt; about the &lt;a href="http://www.microsoft.com/whdc/devtools/debugging/default.mspx"&gt;Debugging Tools for Windows&lt;/a&gt; and their usefulness in conjunction with &lt;a href="http://www.sysinternals.com/Utilities/ProcessExplorer.html"&gt;Process Explorer&lt;/a&gt;. Today I needed the Debugging Tools on a server where an ASP.NET application was running with 100% load on one CPU core with lots of context switches.&lt;/p&gt; &lt;p&gt;When you open Process Explorer's Threads tab for a certain process,&amp;nbsp;Process Explorer will &lt;a href="http://www.hanselman.com/blog/CommentView.aspx?guid=d06b2f24-a629-4f5c-ae0f-2d2dde828053#a31b5882-d40d-4aec-a5d3-519f5de22aca"&gt;approximate function names&lt;/a&gt; and display offsets if the Debugging Tools are not installed. When Process Explorer is configured to use the Debugging Tools and Microsoft Symbol Servers it will display actual function names instead of obscure offsets.&lt;/p&gt; &lt;table cellspacing="2" align="center"&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;&lt;a href="http://www.it99.org/axl/content/binary/Process%20Explorer%20Offsets.png"&gt;&lt;img title="Offsets in Process Explorer" alt="Offsets in Process Explorer" src="http://www.it99.org/axl/content/binary/Process%20Explorer%20Offsets%20small.png" border="0"&gt;&lt;/a&gt;&lt;/td&gt; &lt;td&gt;&lt;a href="http://www.it99.org/axl/content/binary/Process%20Explorer%20Function%20Names.png"&gt;&lt;img title="Function Names in Process Explorer" alt="Function Names in Process Explorer" src="http://www.it99.org/axl/content/binary/Process%20Explorer%20Function%20Names%20small.png" border="0"&gt;&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt; &lt;tr style="text-align: center"&gt; &lt;td&gt;Offsets&lt;/td&gt; &lt;td&gt;Function Names&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt; &lt;p&gt;Being the kind of guy I am, I opted for a minimal installation of the Debugging Tools, that is just the "Tools" and "Helpful Tools" branches displayed in the installer. This also installs &lt;strong&gt;dbghelp.dll&lt;/strong&gt; which is needed for Symbol Server support. After &lt;a href="http://www.microsoft.com/whdc/devtools/debugging/debugstart.mspx"&gt;setting the NT symbol path environment variable&lt;/a&gt; and pointing Process Explorer to&amp;nbsp;&lt;strong&gt;%ProgramFiles%\Debugging Tools for Windows\dbghelp.dll&lt;/strong&gt; everything should have worked. So I opened&amp;nbsp;Process Explorer, displayed the properties of some process, opened the Threads tabs â€¦and saw function offsets.&lt;/p&gt; &lt;p&gt;What&amp;nbsp;happened? After&amp;nbsp;some &lt;a href="http://www.sysinternals.com/Utilities/Filemon.html"&gt;Filemon&lt;/a&gt; investigation I found that the symbol path wasn't touched by Process Explorer, no &lt;strong&gt;PDB&lt;/strong&gt;s were downloaded and thus just offsets&amp;nbsp;could be&amp;nbsp;displayed. I got the idea that some Debugging Tools component was missing and installed the full package. Lo and behold, the function names were shown!&lt;/p&gt; &lt;p&gt;After playing around I found that the only component you need install to get Symbol Server support is the "Debuggers" branch. This will also get you &lt;a href="http://en.wikipedia.org/wiki/WinDbg"&gt;WinDbg&lt;/a&gt;, a basic yet powerful debugger for Windows with &lt;a href="http://www.openrce.org/downloads/"&gt;plugin&lt;/a&gt; support. Mental note: Try WinDbg.&lt;/p&gt; &lt;p&gt;Aren't these the tools from the &lt;a href="http://www.theitcrowd.co.uk/"&gt;basement&lt;/a&gt;, &lt;a href="http://torstenweber.online.de/DNUG/public/DNUG/Ansprechpartner.aspx"&gt;Torsten&lt;/a&gt;? :-)&lt;/p&gt;</Content>
      <Created>2006-10-09T18:11:03.0832500+02:00</Created>
      <Modified>2006-10-09T18:11:03.0832500+02:00</Modified>
      <EntryId>ea2be951-f5e9-436b-a9d6-5fedbd12804c</EntryId>
      <Title>Minimal Debugging Tools for Windows Installation for Symbol Server Support</Title>
      <Categories>Debugging;Windows</Categories>
      <Author>agross</Author>
      <IsPublic>true</IsPublic>
      <Syndicated>true</Syndicated>
      <ShowOnFrontPage>true</ShowOnFrontPage>
      <AllowComments>true</AllowComments>
      <Attachments />
      <Crossposts />
    </Entry>
  </Entries>
</DayEntry>